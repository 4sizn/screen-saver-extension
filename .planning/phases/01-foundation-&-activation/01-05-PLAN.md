---
phase: 01-foundation-&-activation
plan: 05
type: execute
wave: 2
depends_on: ["01-04"]
files_modified: []
autonomous: false
gap_closure: true

must_haves:
  truths:
    - "Extension installs successfully in Chrome, Firefox, Edge, and Safari"
    - "Icon click activation works identically across all browsers"
    - "Badge state updates correctly in all browsers"
    - "Notification and sound feedback work in all browsers"
    - "ESC key deactivation works in all browsers"
  artifacts: []
  key_links: []
---

<objective>
Complete cross-browser verification testing to confirm extension works identically on Chrome, Firefox, Edge, and Safari.

Purpose: Address verification gap - Plan 01-03 included blocking human verification checkpoint but completion was not documented
Output: Documented evidence of cross-browser functionality testing
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-&-activation/01-VERIFICATION.md
@.planning/phases/01-foundation-&-activation/01-CONTEXT.md

# Previous plans
@.planning/phases/01-foundation-&-activation/01-03-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete Phase 1 cross-browser extension infrastructure with:
- WXT framework build system generating browser-specific manifests
- Background service worker with icon click activation/deactivation
- Content script with Shadow DOM overlay
- Icon badge state management (gray inactive, green active)
- Browser notification on activation
- Audio click sound on activation
- ESC key deactivation
  </what-built>

  <how-to-verify>
Test the extension in ALL 4 target browsers following these steps:

**Build Process:**
```bash
# Build for all browsers
npm run build

# Output locations:
# - Chrome/Edge: .output/chrome-mv3
# - Firefox: .output/firefox-mv3
# - Safari: .output/safari-mv3 (may require additional build step)
```

**Installation Steps by Browser:**

**Chrome:**
1. Navigate to chrome://extensions/
2. Enable "Developer mode" (toggle in top right)
3. Click "Load unpacked"
4. Select `.output/chrome-mv3` directory
5. Verify extension appears with icon in toolbar

**Firefox:**
1. Navigate to about:debugging#/runtime/this-firefox
2. Click "Load Temporary Add-on"
3. Select any file in `.output/firefox-mv3` directory (manifest.json recommended)
4. Verify extension appears with icon in toolbar

**Edge:**
1. Navigate to edge://extensions/
2. Enable "Developer mode" (toggle in bottom left)
3. Click "Load unpacked"
4. Select `.output/chrome-mv3` directory (Edge uses Chrome build)
5. Verify extension appears with icon in toolbar

**Safari:**
1. Ensure Xcode Command Line Tools installed
2. Build may require additional conversion step (WXT generates Safari-compatible output)
3. Load extension through Safari → Preferences → Extensions → Developer
4. Note: Safari testing may be deferred if platform constraints exist

**Functional Testing (repeat for EACH browser):**

**Test 1: Initial State**
- Open new tab to any website (e.g., google.com)
- Verify extension icon visible in toolbar
- Verify badge shows gray dot (inactive state)

**Test 2: Icon Click Activation**
1. Click extension icon
2. EXPECTED:
   - Full-screen black overlay appears immediately
   - Badge changes from gray to green
   - Browser notification appears: "스크린세이버 활성화" / "ESC 키를 눌러 종료하세요"
   - Short click sound plays (~150ms percussive sound)
   - Overlay shows "Screen Saver Active" text with "Press ESC to exit"

**Test 3: ESC Key Deactivation**
1. With overlay active, press ESC key
2. EXPECTED:
   - Overlay disappears immediately
   - Badge changes from green to gray
   - NO notification or sound (silent deactivation)

**Test 4: Icon Click Deactivation**
1. Activate via icon click (repeat Test 2)
2. Click extension icon again while overlay active
3. EXPECTED:
   - Overlay disappears immediately
   - Badge changes from green to gray
   - NO notification or sound (silent deactivation)

**Test 5: Multi-Tab Independence**
1. Open two tabs (Tab A and Tab B)
2. In Tab A, activate screen saver via icon click
3. Switch to Tab B
4. EXPECTED:
   - Tab B does NOT show overlay
   - Tab B badge shows gray (inactive)
   - Can activate Tab B independently
   - Switching back to Tab A shows overlay still active

**Test 6: Page Navigation State**
1. Activate screen saver on google.com
2. Navigate to different site (e.g., example.com) in same tab
3. EXPECTED:
   - Overlay persists through navigation OR
   - State resets (overlay removed, badge gray) - either acceptable for Phase 1

**Documentation Required:**

For EACH browser tested, record:
- Browser name and version
- All 6 tests: PASS / FAIL / SKIPPED
- Any browser-specific issues observed
- Visual differences in badge/notification/overlay appearance

**Example format:**
```
Chrome 121.0.6167.184:
✓ Test 1: Initial state - PASS
✓ Test 2: Icon activation - PASS
✓ Test 3: ESC deactivation - PASS
✓ Test 4: Icon deactivation - PASS
✓ Test 5: Multi-tab - PASS
✓ Test 6: Navigation - PASS (overlay removed on navigation, acceptable)
Notes: Badge dot slightly larger than Firefox, notification styling native to Chrome

Firefox 122.0:
✓ Test 1: Initial state - PASS
...
```

**Acceptable Variations:**
- Badge visual appearance may differ (size, position, exact shade)
- Notification styling varies per browser (native system notifications)
- Sound volume/playback may have slight timing differences
- Overlay removed on navigation is acceptable (service worker lifecycle)

**Critical Failures (must be fixed):**
- Extension doesn't install (manifest errors)
- Icon click does nothing (event listener not firing)
- Overlay doesn't appear (content script injection failure)
- ESC key doesn't work (event listener not working)
- Badge never updates (API not working)
  </how-to-verify>

  <resume-signal>
Type "verified" followed by browser test results, OR describe any critical issues found that require fixes.

Format:
```
verified

Chrome 121: All tests PASS
Firefox 122: All tests PASS
Edge 120: All tests PASS
Safari 17: SKIPPED (platform constraints)
```

OR if issues found:
```
Chrome: Test 2 FAIL - sound doesn't play
Firefox: Test 5 FAIL - overlay appears in both tabs
```
  </resume-signal>
</task>

</tasks>

<verification>
Human has completed cross-browser testing and documented results for all target browsers (or noted valid reasons for skipping specific browsers).
</verification>

<success_criteria>
- [ ] Extension tested in minimum 3 of 4 browsers (Chrome, Firefox, Edge required; Safari optional)
- [ ] All 6 functional tests executed per browser
- [ ] Test results documented with browser versions
- [ ] Any browser-specific issues noted
- [ ] Phase 1 success criteria validated: "User can install extension on Chrome, Firefox, Edge, and Safari" (or documented platform constraints)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-&-activation/01-05-SUMMARY.md` including:
- Browser versions tested
- Test results matrix (6 tests × N browsers)
- Any browser-specific observations
- Confirmation of cross-browser compatibility
</output>
