---
phase: 01-foundation-&-activation
plan: 04
type: execute
wave: 1
depends_on: []
files_modified: ["entrypoints/content/index.tsx"]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "TypeScript compilation passes without type errors"
    - "Audio path correctly references web accessible resource"
  artifacts:
    - path: "entrypoints/content/index.tsx"
      provides: "Content script with corrected audio path"
      min_lines: 70
      pattern: "runtime\\.getURL\\('/sounds/click\\.wav'\\)"
  key_links:
    - from: "entrypoints/content/index.tsx"
      to: "public/sounds/click.wav"
      via: "browser.runtime.getURL with leading slash"
      pattern: "runtime\\.getURL\\('/sounds/"
---

<objective>
Fix TypeScript type error in audio path reference to enable clean compilation and ensure correct runtime behavior.

Purpose: Address verification gap preventing clean build - audio path missing leading slash causes TypeScript type error
Output: Corrected content script with proper web accessible resource path
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-&-activation/01-VERIFICATION.md

# Existing implementation
@entrypoints/content/index.tsx

# Manifest configuration for web accessible resources
@wxt.config.ts
</context>

<tasks>

<task type="auto">
  <name>Fix audio path to use leading slash</name>
  <files>entrypoints/content/index.tsx</files>
  <action>
Update line 30 in entrypoints/content/index.tsx:

**Current (incorrect):**
```typescript
const audioUrl = browser.runtime.getURL('sounds/click.wav');
```

**Corrected:**
```typescript
const audioUrl = browser.runtime.getURL('/sounds/click.wav');
```

**Why this matters:**
- browser.runtime.getURL() expects paths to web accessible resources to start with `/`
- Without leading slash, TypeScript type checking fails
- While build might work, incorrect API usage could fail in different browser contexts
- Matches pattern used elsewhere (e.g., background.ts uses '/icon/48.png')

**Do NOT change:**
- Audio preloading logic (lines 33-48)
- Error handling and logging
- Audio playback in ACTIVATE message handler (lines 55-66)

**Verification approach:**
After fix, run `npm run type-check` to confirm TypeScript compilation passes without errors.
  </action>
  <verify>npm run type-check</verify>
  <done>TypeScript compilation succeeds with exit code 0, no type errors related to runtime.getURL path</done>
</task>

</tasks>

<verification>
1. TypeScript type checking passes cleanly
2. Audio path matches web_accessible_resources pattern in wxt.config.ts
3. Consistent with other resource paths in codebase (icon paths use leading slash)
</verification>

<success_criteria>
- [ ] entrypoints/content/index.tsx line 30 uses `browser.runtime.getURL('/sounds/click.wav')`
- [ ] `npm run type-check` exits with code 0
- [ ] No TypeScript errors related to audio path
- [ ] Pattern matches other runtime.getURL calls in codebase
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-&-activation/01-04-SUMMARY.md`
</output>
