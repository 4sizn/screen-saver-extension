---
phase: 05-polish-&-integration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - lib/defaultImages.ts
  - entrypoints/content/index.tsx
autonomous: true

must_haves:
  truths:
    - "Default images are real nature photographs from Unsplash, not placeholders"
    - "Audio autoplay policy violations no longer occur on activation"
    - "Extension activation provides clear feedback without browser policy errors"
  artifacts:
    - path: "lib/defaultImages.ts"
      provides: "15 Unsplash nature image URLs replacing placeholder paths"
      min_lines: 30
    - path: "entrypoints/content/index.tsx"
      provides: "Content script without automatic audio playback"
      min_lines: 50
  key_links:
    - from: "lib/defaultImages.ts"
      to: "public/images/defaults/"
      via: "Array of 15 Unsplash image paths"
      pattern: "images/defaults/nature-\\d{2}\\.jpg"
    - from: "entrypoints/content/index.tsx"
      to: "Audio playback removed"
      via: "Removed audio.play() call in ACTIVATE handler"
      pattern: "!audio\\.play"
---

<objective>
Replace placeholder default images with real Unsplash nature photographs and remove automatic audio playback to fix autoplay policy violations.

Purpose: Deliver high-quality visual content for users and eliminate console errors from browser autoplay policies blocking activation sound.

Output: Production-ready default images bundle and clean activation flow without audio errors.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-polish-&-integration/05-RESEARCH.md

# Current implementation
@lib/defaultImages.ts
@entrypoints/content/index.tsx
@public/sounds/click.wav
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace placeholder images with Unsplash nature landscapes</name>
  <files>public/images/defaults/nature-01.jpg through nature-15.jpg</files>
  <action>
Download 15 high-quality nature landscape images from Unsplash API and save to public/images/defaults/ directory.

Requirements:
- Query: "nature landscape" or "scenic landscape"
- Dimensions: 1920x1080 preferred (Full HD resolution)
- Orientation: Landscape
- Quality: High-resolution suitable for full-screen display
- License: Free to use (Unsplash license)
- Naming: Exactly match existing names (nature-01.jpg through nature-15.jpg)

Use Unsplash API endpoint:
```bash
# Unsplash Source API (no auth required)
https://source.unsplash.com/1920x1080/?nature,landscape

# Or use specific photo IDs for consistent results
# Find photos via https://unsplash.com/s/photos/nature-landscape
```

Steps:
1. Download 15 distinct landscape images
2. Verify dimensions ~1920x1080 (some variance acceptable)
3. Verify file sizes are reasonable (<2MB each for performance)
4. Replace existing placeholder files in public/images/defaults/
5. Preserve exact filenames (nature-01.jpg through nature-15.jpg)

Note: lib/defaultImages.ts already references these paths - no code changes needed, just replace image files.
  </action>
  <verify>
```bash
# Verify all 15 images exist with reasonable sizes
ls -lh public/images/defaults/nature-*.jpg | wc -l  # Should be 15
du -sh public/images/defaults/  # Total size should be 5-30MB

# Verify images are valid JPEGs
file public/images/defaults/nature-01.jpg  # Should show JPEG image data

# Optional: Check dimensions
identify public/images/defaults/nature-01.jpg  # Requires ImageMagick
```
  </verify>
  <done>All 15 placeholder images replaced with real Unsplash nature photographs, files exist at correct paths with appropriate dimensions and sizes</done>
</task>

<task type="auto">
  <name>Task 2: Remove automatic audio playback to fix autoplay policy violations</name>
  <files>entrypoints/content/index.tsx</files>
  <action>
Remove automatic audio playback from activation flow while preserving visual overlay and notification feedback.

Current implementation (lines 29-66):
- Preloads audio file
- Plays sound on ACTIVATE message
- Logs errors when autoplay policy blocks playback

Changes needed:
1. Remove audio element creation and preloading (lines 29-48)
2. Remove audio.play() call from ACTIVATE handler (lines 55-66)
3. Keep ui.mount() for visual overlay (this is the primary feedback)
4. Background script notification remains (already implemented in background.ts line 158)

Rationale from research (05-RESEARCH.md Pitfall 2):
- Browser autoplay policies block audio without user interaction
- Extension icon click is not sufficient interaction for content script context
- Visual overlay + notification already provide sufficient activation feedback
- Removing audio eliminates NotAllowedError console errors

Implementation:
```typescript
// BEFORE (lines 29-66):
const audio = new Audio(audioUrl);
audio.play()...

// AFTER (simplified):
browser.runtime.onMessage.addListener((message: Message) => {
  if (message.type === 'ACTIVATE') {
    ui.mount();
    // Visual overlay provides activation feedback
    // Notification handled by background script
  } else if (message.type === 'DEACTIVATE') {
    ui.remove();
  }
});
```

DO NOT remove:
- ui.mount() - Essential for showing overlay
- ui.remove() - Essential for hiding overlay
- Message listener structure - Required for background script communication

Keep comment explaining why no audio:
```typescript
// Note: Audio removed due to browser autoplay policy violations.
// Visual overlay + notification provide sufficient activation feedback.
```
  </action>
  <verify>
```bash
# Build extension and check for audio references
npm run build
grep -n "Audio\|audio" entrypoints/content/index.tsx

# Should only show:
# - Comment explaining removal
# - No new Audio() calls
# - No audio.play() calls

# Test activation flow
npm run dev
# 1. Click extension icon
# 2. Check DevTools console - should have NO NotAllowedError
# 3. Verify overlay still appears
# 4. Verify notification still shows
```
  </verify>
  <done>Audio playback removed from content script, activation feedback relies on visual overlay and notification only, no autoplay policy errors in console</done>
</task>

</tasks>

<verification>
**Overall Phase Checks:**

1. Build production version without errors:
```bash
npm run build
```

2. Verify default images bundle size reasonable:
```bash
du -sh public/images/defaults/
# Should be 5-30MB total
```

3. Test activation flow with fresh install:
```bash
npm run dev
# 1. Click icon
# 2. Verify overlay appears with real nature image
# 3. Check console - no audio errors
# 4. Verify notification displays
```

4. Verify all 15 default images load to IndexedDB:
```bash
# In browser DevTools > Application > IndexedDB > screen-saver-images > images
# Should see 15 entries with isDefault: true
```
</verification>

<success_criteria>
**Measurable Completion:**
- [ ] 15 Unsplash nature images downloaded and saved to public/images/defaults/
- [ ] All images are valid JPEGs with landscape orientation
- [ ] Total image bundle size is 5-30MB (reasonable for extension distribution)
- [ ] Audio preloading and playback code removed from entrypoints/content/index.tsx
- [ ] Extension builds without errors (`npm run build` succeeds)
- [ ] Extension activation shows overlay without console errors
- [ ] Default images load correctly to IndexedDB on fresh install
- [ ] Notification feedback still works (handled by background script)
</success_criteria>

<output>
After completion, create `.planning/phases/05-polish-&-integration/05-01-SUMMARY.md` following the standard summary template.

Include:
- Links to 15 new Unsplash images (or photo IDs if available)
- Confirmation of audio removal
- Performance impact (smaller extension without audio processing code)
- Any notable image selections or quality observations
</output>
