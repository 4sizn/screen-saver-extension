---
phase: 05-polish-&-integration
plan: 03
type: execute
wave: 3
depends_on: ["05-02"]
files_modified:
  - .planning/phases/05-polish-&-integration/PRIVACY_POLICY.md
  - .planning/phases/05-polish-&-integration/STORE_LISTING.md
autonomous: true

must_haves:
  truths:
    - "Browser-specific ZIP packages exist for Chrome, Firefox, and Edge"
    - "Firefox package includes source code ZIP for code review"
    - "Privacy policy document exists explaining local-only data storage"
    - "Store listing materials prepared with descriptions and metadata"
  artifacts:
    - path: ".output/screen-saver-{version}-chrome.zip"
      provides: "Chrome Web Store submission package"
      min_size: 5000000
    - path: ".output/screen-saver-{version}-firefox.zip"
      provides: "Firefox Add-ons submission package"
      min_size: 5000000
    - path: ".output/screen-saver-{version}-sources.zip"
      provides: "Firefox source code for reviewer rebuild"
      min_size: 100000
    - path: ".output/screen-saver-{version}-edge.zip"
      provides: "Microsoft Edge Add-ons submission package"
      min_size: 5000000
    - path: ".planning/phases/05-polish-&-integration/PRIVACY_POLICY.md"
      provides: "Privacy policy for store submissions"
      min_lines: 10
    - path: ".planning/phases/05-polish-&-integration/STORE_LISTING.md"
      provides: "Store listing description and metadata"
      min_lines: 30
  key_links:
    - from: "wxt zip command"
      to: ".output/{name}-{version}-chrome.zip"
      via: "Default Chrome build output"
      pattern: "wxt zip"
    - from: "wxt zip -b firefox"
      to: ".output/{name}-{version}-firefox.zip + sources.zip"
      via: "Firefox build with source code"
      pattern: "wxt zip -b firefox"
    - from: "PRIVACY_POLICY.md"
      to: "Store listing requirements"
      via: "Privacy policy URL required by all stores"
      pattern: "privacy.*local.*no.*tracking"
---

<objective>
Generate browser-specific ZIP packages for distribution and prepare store listing materials including privacy policy and descriptions.

Purpose: Create submission-ready packages for Chrome Web Store, Firefox Add-ons, and Microsoft Edge Add-ons with all required documentation.

Output: 4 ZIP files (Chrome, Firefox, Firefox sources, Edge) and store listing documentation ready for manual submission.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-polish-&-integration/05-RESEARCH.md
@.planning/phases/05-polish-&-integration/05-01-SUMMARY.md
@.planning/phases/05-polish-&-integration/05-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Generate browser-specific ZIP packages</name>
  <files>.output/screen-saver-*-chrome.zip, .output/screen-saver-*-firefox.zip, .output/screen-saver-*-sources.zip, .output/screen-saver-*-edge.zip</files>
  <action>
Generate browser-specific distribution packages using WXT's built-in ZIP command.

Commands (from 05-RESEARCH.md):

1. **Chrome Web Store package (default):**
```bash
npm run zip
# OR explicitly:
# wxt zip
# Creates: .output/screen-saver-{version}-chrome.zip
```

2. **Firefox Add-ons package (includes source code):**
```bash
wxt zip -b firefox
# Creates: .output/screen-saver-{version}-firefox.zip
#          .output/screen-saver-{version}-sources.zip
```

3. **Microsoft Edge Add-ons package:**
```bash
wxt zip -b edge
# Creates: .output/screen-saver-{version}-edge.zip
```

**Important differences per browser:**
- **Chrome**: Default MV3 build, no special requirements
- **Firefox**: MV2 by default (WXT handles), requires source code ZIP for review
- **Edge**: MV3 build, similar to Chrome but separate package

Verification steps:
1. All 4 ZIP files created in .output/ directory
2. Chrome, Firefox, Edge packages are 5-30MB each (contains 15 images)
3. Sources ZIP is smaller (<5MB - code only, no images)
4. Each ZIP contains manifest.json at root
5. Each ZIP contains appropriate structure for target browser

Inspect package contents:
```bash
unzip -l .output/screen-saver-*-chrome.zip | head -20
unzip -l .output/screen-saver-*-firefox.zip | head -20
unzip -l .output/screen-saver-*-sources.zip | head -20
unzip -l .output/screen-saver-*-edge.zip | head -20
```

Expected structure (Chrome/Firefox/Edge):
- manifest.json (root)
- background.js (service worker)
- content-scripts/ (content script)
- options.html + chunks/ (options page)
- images/defaults/ (15 nature images)
- icon/ (extension icons)

Expected structure (Firefox sources):
- All source files (.ts, .tsx)
- package.json
- wxt.config.ts
- tsconfig.json
- NO node_modules/
- NO .output/
- NO build artifacts
  </action>
  <verify>
```bash
# Verify all packages created
ls -lh .output/*.zip

# Should see 4 files:
# screen-saver-{version}-chrome.zip (5-30MB)
# screen-saver-{version}-firefox.zip (5-30MB)
# screen-saver-{version}-edge.zip (5-30MB)
# screen-saver-{version}-sources.zip (<5MB)

# Check Chrome package structure
unzip -l .output/screen-saver-*-chrome.zip | grep manifest.json
unzip -l .output/screen-saver-*-chrome.zip | grep background.js
unzip -l .output/screen-saver-*-chrome.zip | grep "images/defaults" | wc -l  # Should be 15

# Check Firefox sources package
unzip -l .output/screen-saver-*-sources.zip | grep package.json
unzip -l .output/screen-saver-*-sources.zip | grep entrypoints
unzip -l .output/screen-saver-*-sources.zip | grep node_modules  # Should be empty (excluded)

# Verify package integrity
unzip -t .output/screen-saver-*-chrome.zip
unzip -t .output/screen-saver-*-firefox.zip
unzip -t .output/screen-saver-*-edge.zip
unzip -t .output/screen-saver-*-sources.zip
```
  </verify>
  <done>4 browser-specific ZIP packages created in .output/ directory, all packages pass integrity checks, Chrome/Firefox/Edge contain full extension with images, Firefox sources contains buildable source code</done>
</task>

<task type="auto">
  <name>Task 2: Create privacy policy document</name>
  <files>.planning/phases/05-polish-&-integration/PRIVACY_POLICY.md</files>
  <action>
Create privacy policy document for browser extension store submissions.

All browser stores require privacy policy URL. Since extension is local-only with no data collection, create simple privacy policy explaining this.

Content based on 05-RESEARCH.md store listing template:

```markdown
# Privacy Policy - Screen Saver Browser Extension

**Effective Date:** {Current Date}
**Last Updated:** {Current Date}

## Data Collection

Screen Saver extension **does not collect, store, or transmit any personal data**.

## Local Storage Only

All data is stored locally on your device using browser storage APIs:
- **Images**: Custom uploaded images are stored in IndexedDB in your browser
- **Settings**: Display preferences (fit mode, background color, image enable/disable) stored in chrome.storage.sync
- **No Server Communication**: Extension does not send any data to external servers
- **No Analytics**: No usage tracking, analytics, or telemetry of any kind

## Permissions Explained

The extension requests the following permissions:

- **storage**: Store custom images locally in IndexedDB
- **unlimitedStorage**: Prevent browser from evicting your image collection due to quota limits
- **notifications**: Show activation notification when screen saver starts
- **activeTab**: Display screen saver overlay in the current browser tab

## Third-Party Services

This extension does not use any third-party services, APIs, or analytics platforms.

## Data Sharing

No data is shared with third parties. All images and settings remain on your local device.

## Changes to Privacy Policy

If privacy practices change, this policy will be updated with a new "Last Updated" date.

## Contact

For questions about this privacy policy, contact: {Your Email or GitHub Issues URL}

---

**Summary:** Screen Saver is a local-only extension. Your images never leave your device. No tracking. No data collection. Full privacy.
```

Replace placeholders:
- {Current Date}: Today's date in YYYY-MM-DD format
- {Your Email or GitHub Issues URL}: User's contact info or repository issues URL

Keep policy simple and accurate. Extension genuinely has no data collection, tracking, or external communication.
  </action>
  <verify>
```bash
# Verify file created
cat .planning/phases/05-polish-&-integration/PRIVACY_POLICY.md

# Should contain:
grep "does not collect" .planning/phases/05-polish-&-integration/PRIVACY_POLICY.md
grep "local" .planning/phases/05-polish-&-integration/PRIVACY_POLICY.md
grep "IndexedDB" .planning/phases/05-polish-&-integration/PRIVACY_POLICY.md
grep "no.*tracking" .planning/phases/05-polish-&-integration/PRIVACY_POLICY.md -i
```
  </verify>
  <done>PRIVACY_POLICY.md created in phase directory, accurately describes local-only storage with no data collection, ready for hosting or pasting into store submission forms</done>
</task>

<task type="auto">
  <name>Task 3: Create store listing materials</name>
  <files>.planning/phases/05-polish-&-integration/STORE_LISTING.md</files>
  <action>
Create comprehensive store listing document with descriptions, metadata, and submission guidance for all browser stores.

Content template from 05-RESEARCH.md with project-specific details:

```markdown
# Store Listing Materials - Screen Saver Extension

## Extension Metadata

**Name:** Screen Saver
**Short Name:** Screen Saver
**Version:** {Read from package.json}
**Category:**
- Chrome Web Store: Productivity
- Firefox Add-ons: Appearance
- Microsoft Edge: Productivity

## Short Description
(132 characters max for Chrome Web Store)

"Instant one-click screen saver with beautiful nature images and custom photo support."

Character count: 91/132

## Full Description

Transform any browser tab into a stunning full-screen screen saver with a single click.

**Features:**
- One-click activation via extension icon
- 15 beautiful nature landscape photos included
- Upload your own images for personalization
- Random image selection keeps display fresh
- Two display modes: Cover (fill screen) or Contain (preserve aspect ratio)
- Customizable background color for letterboxing
- Enable/disable individual images
- Deactivate with ESC key or icon click

**Perfect for:**
- Privacy during work breaks
- Displaying calming imagery during focus sessions
- Personal aesthetic enjoyment
- Quick screen protection when stepping away

**Privacy:**
All images stored locally on your device. No data collection. No cloud uploads. No tracking.

**How to Use:**
1. Click extension icon to activate screen saver
2. Press ESC or click icon again to deactivate
3. Right-click icon > Options to upload images and configure settings

**Keyboard Shortcuts:**
- ESC: Deactivate screen saver

## Privacy Policy URL

{User needs to host PRIVACY_POLICY.md and provide URL}

Options:
- GitHub Pages: https://{username}.github.io/{repo}/PRIVACY_POLICY.md
- GitHub raw: https://raw.githubusercontent.com/{username}/{repo}/master/PRIVACY_POLICY.md
- Paste directly into store submission form (some stores allow this)

## Support/Contact

**Email:** {Your contact email}
**GitHub Issues:** {Repository issues URL if applicable}
**Website:** {Optional - repository or landing page URL}

## Screenshots Needed

Browser stores require screenshots (capture these during 05-04 verification):

1. **Screen saver active** (1280x800 or 640x400)
   - Full-screen overlay showing nature landscape image
   - Capture during activation to show typical user experience

2. **Options page - Image management** (1280x800)
   - Image list with thumbnails
   - Default image badges visible
   - Upload button prominent

3. **Options page - Settings panel** (1280x800)
   - Display settings (fit mode radio buttons)
   - Color picker with selected color
   - Settings section clearly visible

4. **Extension icon with badge** (optional but helpful)
   - Toolbar showing extension icon with green active badge
   - Can be cropped screenshot from browser toolbar

**Screenshot guidelines:**
- Chrome/Edge: 1280x800 or 640x400
- Firefox: 640x480 minimum, up to 5MB per image
- Use PNG format for clarity
- Show actual functionality, not mockups
- Include annotations if helpful (arrows, labels)

## Promotional Images (Optional)

Chrome Web Store allows promotional tiles for featured listings:
- Small tile: 440x280px
- Large tile: 1400x560px

Not required for initial submission. Can add later if extension gains traction.

## Store-Specific Submission Notes

### Chrome Web Store
- Account required: Google Developer account ($5 one-time fee)
- Package: Use .output/screen-saver-{version}-chrome.zip
- Review time: Typically 1-3 days
- Privacy policy: Must be publicly accessible URL
- Screenshots: 1-5 screenshots required

### Firefox Add-ons
- Account required: Free Firefox account
- Package: Use .output/screen-saver-{version}-firefox.zip
- Source code: Upload .output/screen-saver-{version}-sources.zip
- Build instructions: Create SOURCE_CODE_REVIEW.md (see below)
- Review time: Typically 1-7 days (longer due to source review)
- Privacy policy: Can paste directly or provide URL

### Microsoft Edge Add-ons
- Account required: Microsoft Partner Center account (free)
- Package: Use .output/screen-saver-{version}-edge.zip
- Review time: Typically 1-3 days
- Very similar to Chrome Web Store process

### Safari (Deferred)
- Requires macOS + Xcode + safari-web-extension-converter
- Requires Apple Developer account ($99/year)
- Consider for future release if demand exists

## Firefox Source Code Build Instructions

Create `.planning/phases/05-polish-&-integration/SOURCE_CODE_REVIEW.md`:

```markdown
# Build Instructions for Firefox Reviewers

## Requirements
- Node.js 18 or higher
- npm 9 or higher

## Build Steps

1. Extract source code ZIP
2. Install dependencies:
   ```bash
   npm install
   ```

3. Build extension:
   ```bash
   npm run build
   ```

4. Output location:
   ```
   .output/firefox-mv2/
   ```

5. Verify manifest:
   ```bash
   cat .output/firefox-mv2/manifest.json
   ```

## Expected Output

The built extension should match the submitted firefox.zip exactly. The build process:
- Compiles TypeScript to JavaScript
- Bundles with Vite
- Generates manifest.json for Firefox (MV2)
- Copies images/defaults/ (15 nature landscape JPEGs)
- Copies icon assets

## Deterministic Build

Build should produce identical output given same Node.js version. Differences may occur due to:
- Different Node.js versions (use Node 18+ LTS)
- Timestamp in generated files (acceptable variance)
- Vite bundling optimizations (functionally identical)

## Dependencies

All dependencies listed in package.json. No external build dependencies required beyond Node.js and npm.

## Questions

For build issues or questions, contact: {Your email or GitHub issues URL}
```

This ensures Firefox reviewers can rebuild extension from source, which is required for approval.
```

Replace placeholders:
- {Read from package.json}: Extract version number
- {username}, {repo}: GitHub details if applicable
- {Your contact email}: User's contact email
- {Repository issues URL}: GitHub issues URL if applicable

Include notes about Safari being deferred (requires macOS, $99/year Apple Developer account).
  </action>
  <verify>
```bash
# Verify file created
cat .planning/phases/05-polish-&-integration/STORE_LISTING.md

# Check for required sections
grep "Short Description" .planning/phases/05-polish-&-integration/STORE_LISTING.md
grep "Full Description" .planning/phases/05-polish-&-integration/STORE_LISTING.md
grep "Screenshots" .planning/phases/05-polish-&-integration/STORE_LISTING.md
grep "Privacy" .planning/phases/05-polish-&-integration/STORE_LISTING.md

# Verify character count for short description (should be <132)
grep -A 3 "Short Description" .planning/phases/05-polish-&-integration/STORE_LISTING.md
```
  </verify>
  <done>STORE_LISTING.md created with complete submission materials including descriptions, metadata, screenshot requirements, and store-specific guidance for Chrome/Firefox/Edge</done>
</task>

</tasks>

<verification>
**Package and Documentation Verification:**

1. All ZIP packages created:
```bash
ls -lh .output/*.zip
# Should show 4 files with appropriate sizes
```

2. Package integrity:
```bash
unzip -t .output/screen-saver-*-chrome.zip
unzip -t .output/screen-saver-*-firefox.zip
unzip -t .output/screen-saver-*-edge.zip
unzip -t .output/screen-saver-*-sources.zip
```

3. Documentation complete:
```bash
cat .planning/phases/05-polish-&-integration/PRIVACY_POLICY.md
cat .planning/phases/05-polish-&-integration/STORE_LISTING.md
```

4. Source code buildable (Firefox requirement):
```bash
# Extract sources ZIP to temporary directory
mkdir /tmp/firefox-source-test
unzip .output/screen-saver-*-sources.zip -d /tmp/firefox-source-test
cd /tmp/firefox-source-test

# Build from source
npm install
npm run build

# Verify output exists
ls .output/firefox-mv2/manifest.json
```
</verification>

<success_criteria>
**Measurable Completion:**
- [ ] Chrome ZIP package exists and passes integrity check
- [ ] Firefox ZIP package exists and passes integrity check
- [ ] Firefox sources ZIP exists and passes integrity check
- [ ] Edge ZIP package exists and passes integrity check
- [ ] All packages contain manifest.json and core files
- [ ] All packages contain 15 default images
- [ ] PRIVACY_POLICY.md created with accurate no-tracking statement
- [ ] STORE_LISTING.md created with descriptions and submission guidance
- [ ] Firefox source code builds successfully from sources ZIP
- [ ] All documentation ready for manual store submission
</success_criteria>

<output>
After completion, create `.planning/phases/05-polish-&-integration/05-03-SUMMARY.md` following the standard summary template.

Include:
- List of all 4 ZIP packages with sizes
- Privacy policy summary
- Store listing highlights
- Firefox source build verification results
- Next steps: User needs to host privacy policy and capture screenshots during 05-04
</output>
